<md-content md-theme="pageTheme" flex>
    <ng-form name="form" novalidate>
        <md-toolbar>
            <div class="md-toolbar-tools" layout-align="space-between center">
                <h2>{{'Destination' | translate}}</h2>
                <md-button class="md-icon-button" ng-click="ctrl.cancel()">
                    <i class="material-icons">close</i>
                </md-button>
            </div>
        </md-toolbar>
        <md-content layout="column" class="md-padding md-dialog-content">
            <div layout="row">
                <md-input-container layout-margin class="md-block" flex>
                    <label>{{'DESTINATIONS_LABEL' | translate}}</label>
                    <md-select ng-model="ctrl.model.country"
                               name="destination" aria-label="dest"
                               placeholder="{{'DESTINATIONS_LABEL' | translate}}"
                               ng-model-options="{trackBy: '$value.title'}"
                               ng-change="ctrl.setCountrySelected()"
                               required>
                        <md-option ng-repeat="item in ctrl.countries" ng-value="item">
                            {{item.title}}
                        </md-option>
                    </md-select>
                    <div class="hint" ng-show="ctrl.isRestrictedCountry()">{{'RESTRICTED_TRAVEL_WARNING' | translate}}</div>
                    <div ng-messages="form.destination.$error"
                         ng-if="ctrl.isFieldErrorVisible(form, 'destination')">
                        <div ng-messages-include="error-messages"></div>
                    </div>
                </md-input-container>
            </div>
            <div layout="row" layout-padding>
                <md-checkbox ng-model="ctrl.model.isOneWay" ng-change="ctrl.setTripForOneWay()" aria-label="one way">
                    {{'ONE_WAY_TRIP' | translate}}
                </md-checkbox>
            </div>
            <div layout="row" layout-padding ng-if="ctrl.model.isOneWay">
                <div layout="column">
                    <h4 layout-padding>{{'DEPARTUREDATE_LABEL' | translate}}</h4>
                    <md-datepicker ng-model="ctrl.model.departureDate"
                                   name="departureDate"
                                   required></md-datepicker>
                    <div class="validation-messages" ng-messages="form.departureDate.$error"
                         ng-if="ctrl.isFieldErrorVisible(form, 'departureDate')">
                        <div ng-messages-include="error-messages"></div>
                    </div>
                </div>
            </div>
            <div layout="row" layout-padding ng-if="!ctrl.model.isOneWay">
                <div layout="column">
                    <h4 layout-padding>{{'DEPARTUREDATE_LABEL' | translate}}</h4>
                    <md-datepicker ng-model="ctrl.model.departureDate"
                                   name="departureDate"
                                   required></md-datepicker>
                    <div class="validation-messages" ng-messages="form.departureDate.$error"
                         ng-if="ctrl.isFieldErrorVisible(form, 'departureDate')">
                        <div ng-messages-include="error-messages"></div>
                    </div>
                </div>
                <div layout="column">
                    <h4 layout-padding>{{'RETURNDATE_LABEL' | translate}}</h4>
                    <md-datepicker ng-model="ctrl.model.returnDate"
                                   name="returnDate"
                                   md-min-date="ctrl.minReturnDate()"
                                   required></md-datepicker>
                    <div class="validation-messages" ng-messages="form.returnDate.$error"
                         ng-if="ctrl.isFieldErrorVisible(form, 'returnDate')">
                        <div ng-messages-include="error-messages"></div>
                    </div>
                </div>
            </div>
            <div layout="row" layout-padding layout-margin>
                <md-input-container layout-margin class="md-block" flex>
                    <label>{{'DIRECTOR_NOTIFICATION' | translate}} :</label>
                    <input type="text" ng-model="ctrl.model.country.director.Title" name="notifyDirector" disabled>
                </md-input-container>
            </div>
        </md-content>
        <div layout="row" layout-align="end center">
            <md-button class="md-raised md-primary saveButton" ng-click="ctrl.storeDestination(form)">
                {{ctrl.pageMode.actionName | translate}}
            </md-button>
        </div>
    </ng-form>
</md-content>